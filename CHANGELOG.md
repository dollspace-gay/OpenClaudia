# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/).

## [Unreleased]

### Removed
- Remove obsolete TestBuilder adversarial subagent code (#205)

### Security
- Fix lru crate Stacked Borrows vulnerability by updating to 0.16.3 (#99)

### Added
- Add read-before-edit enforcement for edit_file tool (#216)
- Add structured tool_use support for Anthropic proxy mode (#207)
- Add Verification-Driven Development (VDD) adversarial loop engine (#197)
- Add research document on evidence-based coding quality guardrails (#196)
- Add integration tests for token budget tracking (#194)
- Add multi-turn agentic loop matching Claude Code turn processing behavior (#185)
- Add Claude Code-compatible plugin system for installing and managing plugins (#176)
- Add nested XML element format parsing for tool interception (#177)
- Add dynamic model discovery from OpenAI-compatible endpoints (#172)
- Add TestBuilder agent that writes tests alongside coding agent (#162)
- Add TodoWrite tool as fallback task tracker when chainlink unavailable (#160)
- Add subagent tools documentation to system prompt (#159)
- Add subagent system for spawning autonomous task agents (#145)
- Add Anthropic prompt caching for system prompt and tools (#144)
- Add generic OpenAI-compatible local LLM support (LM Studio, LocalAI, etc) (#141)
- Add Ollama provider support for local LLM inference (#140)
- Add end-to-end integration test framework for all tools (#133)
- Add WebSearch tool using DuckDuckGo and headless browser (#131)
- Emulate Claude Code native tool format for OAuth requests (#125)
- Add auth command for direct Claude Max OAuth login (#124)
- Update available models list to current 2025-2026 models (#123)
- Add Claude Max OAuth authentication for subscription-based API access (#117)
- Add thinking/reasoning mode support for all compatible providers (#110)
- Add /activity command to show recent session activities (#106)
- Add automatic database migration for short-term memory tables (#105)
- Add short-term memory for session continuity across restarts (#100)
- Add comprehensive README documentation (#98)
- Add system prompt module for Claudia's core personality (#97)
- Add web search tool for knowledge retrieval (#92)
- Add dedicated chainlink tool for task management (#86)
- Improve Windows shell compatibility by using Git Bash instead of PowerShell (#85)
- Build OpenClaudia - Universal Agent Harness (#2)
- Add experimental stateful agent mode with per-project memory (#71)
- Simplify TUI welcome screen with purple and gold styling (#57)
- Add rich TUI interface similar to Claude Code (#53)
- Add robust interactive CLI with slash commands, session management, and TUI improvements (#27)
- Integrate all dead code modules into OpenClaudia proxy and CLI (#14)
- Add Claude Code hook compatibility for .claude/hooks directory (#26)
- Add interactive CLI chat interface for terminal conversations (#25)
- Add DeepSeek and Qwen provider support with OpenAI-compatible API
- Add Z.AI/GLM provider to default generated config.yaml (#23)
- Add Z.AI/GLM provider support for OpenAI-compatible API (#21)
- Add plugin API with manifest validation and loading (#10)
- Add MCP integration layer for external tool servers (#9)
- Add provider adapters for Anthropic, OpenAI, and Google APIs (#8)
- Add session manager with initializer and coding agent patterns (#7)
- Add rules engine for markdown rule loading (#6)
- Add context injector for message modification (#5)
- Add YAML configuration loader with environment variable substitution (#12)
- Add HTTP proxy server with OpenAI-compatible API routing (#3)
- Add hook engine with all 12 event types (#4)

### Fixed
- Fix infinite tool call loop in XML interception mode (#217)
- Fix VDD adversary response parsing for Gemini (#215)
- Fix model not using Write tool to create files (#214)
- Fix proxy mode 400 error by removing tools from OAuth request body (#211)
- Fix model hallucinating tool results by extracting all tool calls from single response (#206)
- Fix all provider URL construction for base URLs containing /v1 suffix (#178)
- Fix dynamic model discovery URL construction for base URLs containing /v1 suffix (#176)
- Fix bash tool to use correct working directory (#170)
- Clean up unused code and fix compiler warnings (#84)
- Fix bash tool to use Git Bash instead of WSL on Windows (#90)
- Update dependencies to fix net2 deprecation warning (#22)
- Fix bash tool to use PowerShell on Windows for better command compatibility (#70)
- Fix tool use not working with zai/GLM provider (#63)
- Fix truncated tips text in TUI welcome screen (#61)
- Fix TUI box rendering using ASCII-compatible characters (#60)
- Fix TUI welcome screen box drawing alignment (#59)

### Changed
- Integrate VDD engine into main chat loop (#213)
- Add VDD section to generated config.yaml from init command (#212)
- Update proxy-mode agentic loop for structured tool_use with XML fallback (#210)
- Add tool definitions to proxy mode requests and handle tool_use in stream (#209)
- Add VDD integration tests (#204)
- Add VDD proxy integration with advisory and blocking modes (#200)
- Add VDD session tracking and metrics (#202)
- Add VDD hook events for adversarial lifecycle (#201)
- Add VDD core types and engine module (#198)
- Add VDD configuration to config system (#199)
- Verify plugin system can install and load plugins end-to-end (#182)
- Add marketplace support for git and local directory sources (#181)
- Add /plugin slash command with install, uninstall, list, enable, disable subcommands (#180)
- Add plugin component loader for commands, hooks, and MCP servers (#179)
- Add plugin storage and installation tracking (#178)
- Add plugin manifest and marketplace schema definitions (#177)
- Add /models command to list and select available models (#175)
- Implement model listing for OpenAI-compatible providers (#174)
- Add list_models method to ProviderAdapter trait (#173)
- Fix model not receiving bash tool output causing hallucinated responses (#171)
- Add console logging for TestBuilder agent activity (#169)
- Add automatic TestBuilder spawn when coding agent starts work (#168)
- Add chainlink reopen and alert functionality for failed tests (#167)
- Add test failure analysis to distinguish test bugs from code bugs (#166)
- Add test runner integration (cargo test, pytest detection) (#165)
- Add file change monitoring via git diff tracking (#164)
- Add TestBuilder agent type with test-focused system prompt (#163)
- Add background agent execution with async tracking (#150)
- Add agent type configurations and system prompts (#149)
- Add AgentOutputTool for background agent result retrieval (#148)
- Add subagent runner with isolated conversation context (#147)
- Add Task tool definition for spawning subagents (#146)
- Fix Anthropic tool format - use native tool types instead of function format (#151)
- Fix missing bash_output and kill_shell tool definitions in get_tool_definitions (#143)
- Update README with new features (web search, background shells, memory, offset/limit) (#142)
- Add offset and limit parameters to read_file tool (#139)
- Add E2E tests for memory tools (#138)
- Add E2E tests for web tools (web_fetch, web_search) (#137)
- Add E2E tests for bash tools (bash, bash_output, kill_shell) (#136)
- Add E2E tests for file tools (read, write, edit, glob, grep) (#135)
- Set up integration test infrastructure with test helpers (#134)
- Add automatic OAuth flow when starting OpenClaudia with Anthropic provider (#127)
- Add automatic OAuth flow when starting OpenClaudia with Anthropic provider (#127)
- Add Claude Code system prompt injection for OAuth requests (#122)
- Add OAuth token refresh and proxy integration (#121)
- Add device flow authentication endpoints (#120)
- Add OAuth session storage with token persistence (#119)
- Add OAuth types and PKCE utilities in src/oauth.rs (#118)
- Add thinking support for Qwen QwQ (#116)
- Add thinking support for DeepSeek R1 (#115)
- Add thinking support for Google Gemini (#113)
- Add reasoning support for OpenAI o1/o3 models (#112)
- Add extended thinking support for Anthropic Claude (#111)
- Add thinking support for Z.AI GLM-4.7 (#114)
- Add graceful shutdown and autosave for session memory (#109)
- Fix short-term memory not persisting even with --stateful flag (#108)
- Fix short-term memory not persisting across terminal restarts (#107)
- Track recent file modifications and tool usage (#104)
- Inject recent session context into new sessions (#103)
- Auto-save session summary on session end (#102)
- Add short-term memory database schema and initialization (#101)
- Add web_browser tool using headless-chrome (#95)
- Add web_search tool with Tavily/Brave API support (#94)
- Add web_fetch tool using Jina Reader (#93)
- Fix chainlink tool to properly find and execute the chainlink binary (#88)
- Add helpful install message when chainlink is not found (#87)
- Add /memory command to view and manage archival memory (#77)
- Integrate stateful memory with chat loop and tool execution (#76)
- Implement core memory injection into system prompt (#75)
- Implement memory tools for agent (save, search, update) (#74)
- Add SQLite memory database module with schema and initialization (#73)
- Add --stateful CLI flag and stateful mode detection (#72)
- Improve tool execution loop to use all ToolCallAccumulator methods (#69)
- Implement tool execution loop (#67)
- Parse tool_calls from streaming response (#66)
- Add tools field to chat request body (#65)
- Define tool schemas for Bash, Read, Write, and Edit (#64)
- Run comprehensive CLI command tests (#62)
- Integrate TUI input prompt hints into chat interface (#58)
- Add styled input area with shortcuts hints (#56)
- Add two-column welcome layout with tips and recent activity (#55)
- Add welcome banner with ASCII art logo and version (#54)
- Add keyboard shortcut handling to use configured keybindings (#52)
- Integrate PluginManager for plugin discovery and loading (#18)
- Integrate McpManager for external tool server support (#17)
- Integrate ProviderAdapters for multi-provider request transformation (#16)
- Integrate SessionManager into proxy state tracking (#19)
- Integrate ContextCompactor into proxy request flow (#15)
- Add /debug command to show configuration paths, environment, and internal state
- Add /version command to show version and system information
- Add #comment syntax to save notes without sending to AI
- Add /rename command to rename session titles
- Expand tips system with 30 helpful hints covering all features
- Add configurable keybindings system (#47)
- Add agent mode switching with Tab key (Build vs Plan modes) (#38)
- Add interactive permission prompts for sensitive operations (allow/deny/always) (#41)
- Add /theme command for switching color themes (#43)
- Add /connect command for interactive API key configuration (#40)
- Add status bar showing model, session, and token count (#42)
- Add /review command to review uncommitted changes or PRs (#51)
- Add /init command to auto-generate project rules from codebase (#50)
- Add tips system showing helpful hints on startup (#44)
- Add clipboard integration to copy last response (Ctrl+X Y) (#45)
- Add context compaction for long-running sessions (#13)
- Add CLI with init, start, and loop commands (#11)
- Add /undo and /redo commands for conversation history (#30)
- Add external editor support with Ctrl+X E or /editor command (#37)
- Add /models command and F2 key for model switching (#39)
- Add Escape key to cancel in-progress responses (#49)
- Add /models command for listing and switching models (#39)
- Add /undo and /redo commands for message history (#30)
- Add Escape key to cancel AI responses mid-stream (#49)
- Add /editor command for external editor support (#37)
- Add @filename syntax for fuzzy file attachment in prompts (#33)
- Add /compact command to summarize long sessions (#31)
- Add multiline input support with Shift+Enter or Ctrl+J (#36)
- Add /export command to save conversation as Markdown (#32)
- Add !command syntax for direct shell execution from chat (#34)
- Add /sessions command to list and continue previous sessions (#29)
- Add streaming response display with real-time token output (#46)
- Add slash command system with /help, /new, /clear, /exit commands (#28)
- Add spinner and progress indicators during API calls (#48)
- Add command history navigation with arrow keys (#35)
